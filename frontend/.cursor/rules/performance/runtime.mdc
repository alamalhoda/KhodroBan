---
description: Runtime performance optimization including virtual scrolling, debouncing, throttling, requestAnimationFrame, and memoization
globs:
  - "frontend/src/**/*.svelte"
  - "frontend/src/**/*.ts"
alwaysApply: false
---

# Runtime Performance

## Virtual Scrolling

برای لیست‌های بلند (10,000+ items):
- فقط visible items render کن
- Dynamic height calculation
- Smooth scrolling

## Debouncing & Throttling

- **Debounce:** برای search input (300ms delay)
- **Throttle:** برای scroll events (100ms interval)

## RequestAnimationFrame

برای animations:
- استفاده از `requestAnimationFrame` به جای `setTimeout`
- Smooth 60fps animations
- Cancel animation در cleanup

## Memoization

برای محاسبات سنگین:
- Cache results
- فقط recalculate هنگام dependency change
- از unnecessary recalculations پرهیز کن

## Image Optimization

- WebP format
- Lazy loading (`loading="lazy"`)
- Responsive images (`srcset`, `sizes`)
- Progressive loading (skeleton screens)
